<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Facility Location Under Uncertainty - Snyder (2006)</title>
    
    <!-- Tailwind CSS -->
    <script src="https://cdn.tailwindcss.com"></script>
    
    <!-- React & ReactDOM -->
    <script crossorigin src="https://unpkg.com/react@18/umd/react.development.js"></script>
    <script crossorigin src="https://unpkg.com/react-dom@18/umd/react-dom.development.js"></script>
    
    <!-- Babel -->
    <script src="https://unpkg.com/@babel/standalone/babel.min.js"></script>
    
    <!-- Three.js -->
    <script src="https://cdnjs.cloudflare.com/ajax/libs/three.js/r128/three.min.js"></script>

    <!-- KaTeX for Math -->
    <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/katex@0.16.8/dist/katex.min.css">
    <script src="https://cdn.jsdelivr.net/npm/katex@0.16.8/dist/katex.min.js"></script>
    <script src="https://cdn.jsdelivr.net/npm/katex@0.16.8/dist/contrib/auto-render.min.js"></script>

    <!-- Lucide Icons -->
    <script src="https://unpkg.com/lucide@latest"></script>

    <style>
        @import url('https://fonts.googleapis.com/css2?family=Inter:wght@300;400;500;600;700&family=Lora:ital,wght@0,400;0,600;1,400&display=swap');
        
        body {
            font-family: 'Inter', sans-serif;
            background-color: #FAFAFA;
            color: #1e293b;
        }
        
        h1, h2, h3, h4 {
            font-family: 'Lora', serif;
        }

        .math-block {
            overflow-x: auto;
            padding: 1.5rem;
            background: #ffffff;
            border-radius: 0.75rem;
            border: 1px solid #e2e8f0;
            border-left: 4px solid #8b5cf6;
            margin: 1.5rem 0;
            box-shadow: 0 4px 6px -1px rgba(0, 0, 0, 0.05);
        }

        .canvas-container {
            width: 100%;
            height: 500px;
            background: #0f172a;
            border-radius: 1rem;
            overflow: hidden;
            position: relative;
            box-shadow: 0 20px 25px -5px rgba(0, 0, 0, 0.1), 0 10px 10px -5px rgba(0, 0, 0, 0.04);
        }

        .glass-panel {
            background: rgba(255, 255, 255, 0.95);
            backdrop-filter: blur(12px);
            border: 1px solid rgba(226, 232, 240, 0.8);
        }

        /* Custom Scrollbar */
        ::-webkit-scrollbar {
            width: 8px;
        }
        ::-webkit-scrollbar-track {
            background: #f1f1f1; 
        }
        ::-webkit-scrollbar-thumb {
            background: #cbd5e1; 
            border-radius: 4px;
        }
        ::-webkit-scrollbar-thumb:hover {
            background: #94a3b8; 
        }
    </style>
</head>
<body>
    <div id="root"></div>

    <script type="text/babel">
        const { useState, useEffect, useRef } = React;

        // --- Math Component using KaTeX ---
        const Latex = ({ children, block = false }) => {
            const containerRef = useRef(null);

            useEffect(() => {
                if (containerRef.current) {
                    let texString = '';
                    if (typeof children === 'string') {
                        texString = children;
                    } else if (typeof children === 'number') {
                        texString = String(children);
                    } else if (Array.isArray(children)) {
                        texString = children.map(c => String(c)).join('');
                    } else {
                        texString = String(children || '');
                    }

                    try {
                        katex.render(texString, containerRef.current, {
                            throwOnError: false,
                            displayMode: block
                        });
                    } catch (error) {
                        console.error("KaTeX Rendering Error:", error);
                        containerRef.current.innerText = texString;
                    }
                }
            }, [children, block]);

            return <span ref={containerRef} className={block ? "block my-2" : "inline"} />;
        };

        // --- 3D Visualizer: Stochastic vs Robust Strategies ---
        const StrategyVisualizer = () => {
            const mountRef = useRef(null);
            const [strategy, setStrategy] = useState('stochastic'); // 'stochastic' or 'robust'

            useEffect(() => {
                // Scene Setup
                const scene = new THREE.Scene();
                scene.background = new THREE.Color(0x0f172a);
                scene.fog = new THREE.FogExp2(0x0f172a, 0.02);

                const camera = new THREE.PerspectiveCamera(50, mountRef.current.clientWidth / mountRef.current.clientHeight, 0.1, 1000);
                camera.position.set(5, 5, 8);
                camera.lookAt(0, 1, 0);

                const renderer = new THREE.WebGLRenderer({ antialias: true });
                renderer.setSize(mountRef.current.clientWidth, mountRef.current.clientHeight);
                renderer.shadowMap.enabled = true;
                mountRef.current.appendChild(renderer.domElement);

                // Lighting
                const ambientLight = new THREE.AmbientLight(0x404040, 2);
                scene.add(ambientLight);
                const dirLight = new THREE.DirectionalLight(0xffffff, 1.5);
                dirLight.position.set(5, 10, 5);
                dirLight.castShadow = true;
                scene.add(dirLight);

                // Grid
                const gridHelper = new THREE.GridHelper(10, 10, 0x334155, 0x1e293b);
                scene.add(gridHelper);

                // --- Visual Elements ---
                // We visualize 4 Scenarios (bars)
                // Scenario 1: Normal Day (High Prob)
                // Scenario 2: Busy Day (Med Prob)
                // Scenario 3: Bad Weather (Low Prob)
                // Scenario 4: Disaster (Very Low Prob)

                const scenarios = [
                    { label: "Normal", prob: 0.6 },
                    { label: "Busy", prob: 0.25 },
                    { label: "Storm", prob: 0.1 },
                    { label: "Disaster", prob: 0.05 }
                ];

                // Costs for Stochastic Strategy (Optimized for Avg)
                // Low cost in normal days, very high in disaster
                const costsStochastic = [1.0, 2.0, 5.0, 12.0]; 

                // Costs for Robust Strategy (Optimized for Worst Case)
                // Higher cost in normal days (over-prepared), but lower in disaster
                const costsRobust = [2.5, 3.0, 4.0, 6.0];

                const currentCosts = strategy === 'stochastic' ? costsStochastic : costsRobust;
                const color = strategy === 'stochastic' ? 0x3b82f6 : 0x8b5cf6; // Blue vs Purple

                const bars = [];

                scenarios.forEach((s, idx) => {
                    const height = currentCosts[idx];
                    const geometry = new THREE.BoxGeometry(1, height, 1);
                    
                    // Translate geometry so bottom sits on y=0
                    geometry.translate(0, height/2, 0); 

                    const material = new THREE.MeshStandardMaterial({ 
                        color: color, 
                        transparent: true,
                        opacity: 0.8,
                        roughness: 0.2,
                    });
                    
                    const bar = new THREE.Mesh(geometry, material);
                    // Position bars along X axis
                    bar.position.set((idx - 1.5) * 2, 0, 0);
                    bar.castShadow = true;
                    scene.add(bar);
                    bars.push(bar);

                    // Add Probability "Clouds" (Spheres above bars)
                    const probGeo = new THREE.SphereGeometry(s.prob * 1.5, 16, 16);
                    const probMat = new THREE.MeshBasicMaterial({ color: 0xffffff, wireframe: true, transparent: true, opacity: 0.3 });
                    const probMesh = new THREE.Mesh(probGeo, probMat);
                    probMesh.position.set((idx - 1.5) * 2, height + 1.5, 0);
                    scene.add(probMesh);
                });

                // Animation
                let frameId;
                let time = 0;
                const animate = () => {
                    time += 0.01;
                    renderer.render(scene, camera);
                    frameId = requestAnimationFrame(animate);
                };
                animate();

                const handleResize = () => {
                    if(mountRef.current) {
                        const w = mountRef.current.clientWidth;
                        const h = mountRef.current.clientHeight;
                        renderer.setSize(w, h);
                        camera.aspect = w / h;
                        camera.updateProjectionMatrix();
                    }
                };
                window.addEventListener('resize', handleResize);

                return () => {
                    cancelAnimationFrame(frameId);
                    window.removeEventListener('resize', handleResize);
                    if(mountRef.current && renderer.domElement) {
                        mountRef.current.removeChild(renderer.domElement);
                    }
                };
            }, [strategy]);

            return (
                <div className="relative mb-8">
                    <div ref={mountRef} className="canvas-container" />
                    
                    {/* Controls */}
                    <div className="absolute top-4 right-4 flex flex-col gap-2">
                        <button 
                            onClick={() => setStrategy('stochastic')}
                            className={`px-4 py-2 rounded-lg text-sm font-bold transition-all shadow-lg flex items-center gap-2 ${strategy === 'stochastic' ? 'bg-blue-600 text-white' : 'bg-white/80 text-slate-600 hover:bg-white'}`}
                        >
                            <i data-lucide="bar-chart-2" className="w-4 h-4"></i> Stochastic Strategy
                        </button>
                        <button 
                            onClick={() => setStrategy('robust')}
                            className={`px-4 py-2 rounded-lg text-sm font-bold transition-all shadow-lg flex items-center gap-2 ${strategy === 'robust' ? 'bg-purple-600 text-white' : 'bg-white/80 text-slate-600 hover:bg-white'}`}
                        >
                            <i data-lucide="shield" className="w-4 h-4"></i> Robust Strategy
                        </button>
                    </div>

                    {/* Legend / Info */}
                    <div className="absolute bottom-4 left-4 right-4 glass-panel p-4 rounded-lg grid grid-cols-2 gap-4">
                        <div>
                            <h4 className={`text-sm font-bold mb-1 ${strategy === 'stochastic' ? 'text-blue-600' : 'text-purple-600'}`}>
                                {strategy === 'stochastic' ? 'Goal: Minimize Expected Cost' : 'Goal: Minimize Maximum Cost (Minimax)'}
                            </h4>
                            <p className="text-xs text-slate-600">
                                {strategy === 'stochastic' 
                                    ? "Optimizes for the weighted average. Cost is low on 'Normal' days but very high in the 'Disaster' scenario (tall bar on right)." 
                                    : "Optimizes for the worst case. Cost is higher on 'Normal' days (due to redundancy), but the loss in 'Disaster' scenarios is significantly capped."}
                            </p>
                        </div>
                        <div className="text-xs text-slate-500 flex flex-col justify-center">
                            <div className="flex justify-between border-b border-slate-200 pb-1 mb-1">
                                <span>Scenario</span>
                                <span>Cost Impact</span>
                            </div>
                            <div className="flex justify-between"><span>Normal</span> <span className="font-mono">{strategy === 'stochastic' ? '1.0' : '2.5'}</span></div>
                            <div className="flex justify-between"><span>Busy</span> <span className="font-mono">{strategy === 'stochastic' ? '2.0' : '3.0'}</span></div>
                            <div className="flex justify-between"><span>Storm</span> <span className="font-mono">{strategy === 'stochastic' ? '5.0' : '4.0'}</span></div>
                            <div className="flex justify-between font-bold"><span>Disaster</span> <span className="font-mono">{strategy === 'stochastic' ? '12.0' : '6.0'}</span></div>
                        </div>
                    </div>
                </div>
            );
        };

        // --- Main App Component ---
        const App = () => {
            useEffect(() => {
                lucide.createIcons();
            }, []);

            return (
                <div className="max-w-4xl mx-auto px-4 py-12">
                    
                    {/* Header Section */}
                    <header className="mb-12 border-b border-slate-200 pb-8">
                        <div className="flex items-center gap-2 text-purple-600 font-bold tracking-wider text-xs uppercase mb-3">
                            <i data-lucide="book-open" className="w-4 h-4"></i>
                            <span>Comprehensive Review</span>
                        </div>
                        <h1 className="text-4xl md:text-5xl font-bold text-slate-900 mb-4 leading-tight font-serif">
                            Facility Location Under Uncertainty:<br/>A Review
                        </h1>
                        <div className="flex flex-wrap gap-6 text-slate-500 text-sm font-medium">
                            <div className="flex items-center gap-2">
                                <i data-lucide="user" className="w-4 h-4"></i>
                                <span>Lawrence V. Snyder</span>
                            </div>
                            <div className="flex items-center gap-2">
                                <i data-lucide="library" className="w-4 h-4"></i>
                                <span>IIE Transactions (2006)</span>
                            </div>
                            <div className="flex items-center gap-2">
                                <i data-lucide="link" className="w-4 h-4"></i>
                                <span className="hover:text-purple-600 cursor-pointer">DOI: 10.1080/07408170500216480</span>
                            </div>
                        </div>
                    </header>

                    {/* Quick Summary */}
                    <section className="mb-12">
                        <div className="bg-purple-50 border border-purple-100 rounded-xl p-6 md:p-8 flex gap-4">
                            <div className="shrink-0 bg-purple-600 text-white rounded-full w-10 h-10 flex items-center justify-center mt-1 shadow-lg shadow-purple-600/20">
                                <i data-lucide="lightbulb" className="w-5 h-5"></i>
                            </div>
                            <div>
                                <h3 className="text-purple-900 font-bold text-lg mb-2">One-Sentence Summary</h3>
                                <p className="text-purple-800/80 leading-relaxed">
                                    This paper provides a comprehensive review of facility location models under uncertainty, building a critical taxonomy that distinguishes between <strong>Stochastic Models</strong> (optimizing expected value based on known probabilities) and <strong>Robust Models</strong> (optimizing regret based on unknown probabilities).
                                </p>
                            </div>
                        </div>
                    </section>

                    {/* Core Idea & Background */}
                    <section className="mb-16">
                        <h2 className="text-2xl font-bold text-slate-900 mb-6 flex items-center gap-2">
                            <i data-lucide="compass" className="w-6 h-6 text-purple-600"></i>
                            Core Idea: Risk vs. Uncertainty
                        </h2>
                        <div className="prose prose-lg text-slate-600 max-w-none">
                            <p>
                                Facility location decisions are usually costly and hard to reverse (Strategic layer), yet they must operate in a fluctuating environment (Operational layer). Snyder uses the definitions from Rosenhead et al. (1972) to divide the field into:
                            </p>
                            <div className="grid md:grid-cols-2 gap-6 my-8">
                                <div className="bg-white p-6 rounded-xl border border-slate-200 shadow-sm">
                                    <div className="font-bold text-blue-600 mb-2 flex items-center gap-2">
                                        <i data-lucide="bar-chart" className="w-4 h-4"></i> Risk (Stochastic)
                                    </div>
                                    <p className="text-sm text-slate-600 mb-4">
                                        <strong>Parameters:</strong> Random variables with <em>known</em> probability distributions.
                                    </p>
                                    <p className="text-sm text-slate-600">
                                        <strong>Goal:</strong> Minimize <Latex>{`E[\\text{Cost}]`}</Latex> (Expected Value).
                                    </p>
                                    <div className="mt-4 text-xs font-mono bg-slate-50 p-2 rounded text-slate-500">
                                        Representative Models: Mean-Outcome, Chance-Constrained
                                    </div>
                                </div>
                                <div className="bg-white p-6 rounded-xl border border-slate-200 shadow-sm">
                                    <div className="font-bold text-purple-600 mb-2 flex items-center gap-2">
                                        <i data-lucide="help-circle" className="w-4 h-4"></i> Uncertainty (Robust)
                                    </div>
                                    <p className="text-sm text-slate-600 mb-4">
                                        <strong>Parameters:</strong> Probabilities unknown. Only ranges or discrete scenarios are known.
                                    </p>
                                    <p className="text-sm text-slate-600">
                                        <strong>Goal:</strong> Minimize <Latex>{`\\text{Max Regret}`}</Latex> or <Latex>{`\\text{Max Cost}`}</Latex>.
                                    </p>
                                    <div className="mt-4 text-xs font-mono bg-slate-50 p-2 rounded text-slate-500">
                                        Representative Models: Minimax Cost, Minimax Regret, p-Robustness
                                    </div>
                                </div>
                            </div>
                        </div>
                    </section>

                    {/* Visualization */}
                    <StrategyVisualizer />

                    {/* Model Setup & Formulas */}
                    <div className="grid md:grid-cols-[1fr_300px] gap-12 mt-12">
                        <main>
                            <section className="mb-16">
                                <h2 className="text-2xl font-bold text-slate-900 mb-6 flex items-center gap-2">
                                    <i data-lucide="function-square" className="w-5 h-5 text-purple-600"></i>
                                    Mathematical Models Detail
                                </h2>
                                
                                {/* Stochastic */}
                                <div className="mb-10">
                                    <h3 className="text-lg font-bold text-slate-800 mb-3 flex items-center gap-2">
                                        <span className="w-2 h-2 rounded-full bg-blue-500"></span>
                                        I. Stochastic Models
                                    </h3>
                                    <p className="text-slate-600 mb-4 text-sm">
                                        Typically modeled as <strong>Two-Stage Stochastic Programming</strong>.
                                        <br/>
                                        <strong>Stage 1:</strong> Location decisions (Variable <Latex>X</Latex>). Uncertainty is not yet resolved.
                                        <br/>
                                        <strong>Stage 2:</strong> Allocation/Operational decisions (Variable <Latex>Y</Latex>). Scenario <Latex>s</Latex> is known; "Recourse" actions are taken.
                                    </p>
                                    <div className="math-block border-l-blue-500">
                                        <p className="text-xs text-blue-600 font-bold uppercase mb-2">Objective: Minimize Total Expected Cost</p>
                                        <Latex block={true}>
                                            {`\\text{Min } \\sum_{i \\in I} f_i X_i + E_S \\left[ Q(X, \\xi) \\right] = \\sum_{i \\in I} f_i X_i + \\sum_{s \\in S} p_s \\left( \\sum_{i \\in I, j \\in J} q_{ij}^s Y_{ij}^s \\right)`}
                                        </Latex>
                                        <div className="mt-4 space-y-2 text-sm text-slate-700">
                                            <p><strong>Constraints:</strong></p>
                                            <ul className="list-disc list-inside pl-2 space-y-1 text-xs">
                                                <li><Latex>{`\\sum_{i} Y_{ij}^s = 1`}</Latex>: Each customer <Latex>j</Latex> must be served in scenario <Latex>s</Latex>.</li>
                                                <li><Latex>{`Y_{ij}^s \\le X_i`}</Latex>: Service can only be provided by established facility <Latex>i</Latex>.</li>
                                                <li><Latex>{`X_i \\in \\{0, 1\\}, Y_{ij}^s \\ge 0`}</Latex>: Binary location variables, continuous flow variables.</li>
                                            </ul>
                                        </div>
                                    </div>
                                </div>

                                {/* Robust */}
                                <div>
                                    <h3 className="text-lg font-bold text-slate-800 mb-3 flex items-center gap-2">
                                        <span className="w-2 h-2 rounded-full bg-purple-500"></span>
                                        II. Robust Models
                                    </h3>
                                    <p className="text-slate-600 mb-4 text-sm">
                                        When probabilities <Latex>p_s</Latex> are missing, expected value cannot be calculated. The core metric becomes <strong>Regret</strong>.
                                        Regret measures "missed opportunity": the difference between your decision's cost and the optimal cost for that scenario (hindsight).
                                    </p>
                                    <div className="math-block border-l-purple-500">
                                        <p className="text-xs text-purple-600 font-bold uppercase mb-2">Definition: Regret in Scenario S</p>
                                        <Latex block={true}>
                                            {`R_s(X) = C(X, s) - C(X_s^*, s)`}
                                        </Latex>
                                        <div className="mt-2 text-xs text-slate-500 space-y-1">
                                            <p><Latex>{`C(X, s)`}</Latex>: Actual cost of plan <Latex>X</Latex> in scenario <Latex>s</Latex>.</p>
                                            <p><Latex>{`C(X_s^*, s)`}</Latex>: Optimal possible cost for scenario <Latex>s</Latex> (Lower bound).</p>
                                        </div>
                                    </div>
                                    <div className="math-block border-l-purple-500 mt-4">
                                        <p className="text-xs text-purple-600 font-bold uppercase mb-2">Objective: Minimize Maximum Regret (Minimax Regret)</p>
                                        <Latex block={true}>
                                            {`\\text{Min } Z \\quad \\text{s.t.} \\quad Z \\ge R_s(X) \\quad \\forall s \\in S`}
                                        </Latex>
                                        <p className="text-xs text-slate-500 mt-2">
                                            Find a plan <Latex>X</Latex> such that in the worst-case scenario, the regret <Latex>Z</Latex> is minimized. This is a conservative but highly defensive strategy.
                                        </p>
                                    </div>
                                </div>
                            </section>

                            {/* Key Discoveries / Review Findings */}
                            <section className="mb-16">
                                <h2 className="text-2xl font-bold text-slate-900 mb-6 flex items-center gap-2">
                                    <i data-lucide="microscope" className="w-5 h-5 text-purple-600"></i>
                                    Key Discoveries & Concepts
                                </h2>
                                <div className="space-y-6">
                                    
                                    {/* Hakimi Property */}
                                    <div className="bg-white p-5 rounded-lg border border-slate-200 shadow-sm">
                                        <h4 className="font-bold text-slate-800 mb-2 flex items-center gap-2">
                                            <span className="bg-slate-100 text-slate-600 text-xs px-2 py-1 rounded uppercase">Theorem</span>
                                            Hakimi Property Under Uncertainty
                                        </h4>
                                        <p className="text-sm text-slate-600 mb-3">
                                            In deterministic P-Median problems, optimal solutions always lie on nodes (Hakimi Property). Under uncertainty:
                                        </p>
                                        <ul className="list-disc list-inside text-sm text-slate-600 space-y-1">
                                            <li><strong>Stochastic Models:</strong> Mirchandani (1980) proved that for expected-cost objectives, the property <strong>still holds</strong>. You can search only on nodes.</li>
                                            <li><strong>Robust Models:</strong> For Minimax Regret problems, the optimal solution <strong>may lie on an Edge</strong>. This makes robust problems harder to solve (continuous search space vs discrete).</li>
                                        </ul>
                                    </div>

                                    {/* p-Robustness */}
                                    <div className="bg-white p-5 rounded-lg border border-slate-200 shadow-sm">
                                        <h4 className="font-bold text-slate-800 mb-2 flex items-center gap-2">
                                            <span className="bg-purple-100 text-purple-600 text-xs px-2 py-1 rounded uppercase">Concept</span>
                                            p-Robustness
                                        </h4>
                                        <p className="text-sm text-slate-600 mb-3">
                                            Proposed by Kouvelis et al. (1992). A hybrid metric combining "optimization" and "constraints". It does not minimize regret directly but treats it as a hard constraint.
                                        </p>
                                        <div className="bg-slate-50 p-3 rounded border border-slate-100 mb-3">
                                            <Latex block={true}>
                                                {`\\frac{C(X, s) - C(X_s^*, s)}{C(X_s^*, s)} \\le p \\quad \\forall s \\in S`}
                                            </Latex>
                                        </div>
                                        <p className="text-sm text-slate-600">
                                            <strong>Meaning:</strong> Find a plan such that relative regret never exceeds <Latex>p\%</Latex> in any scenario. Often combined with "Minimize Expected Cost", i.e., <strong>"Low average cost, but don't lose too badly in the worst case"</strong>.
                                        </p>
                                    </div>

                                    {/* Alpha-Reliability */}
                                    <div className="bg-white p-5 rounded-lg border border-slate-200 shadow-sm">
                                        <h4 className="font-bold text-slate-800 mb-2 flex items-center gap-2">
                                            <span className="bg-blue-100 text-blue-600 text-xs px-2 py-1 rounded uppercase">Concept</span>
                                            <Latex>\alpha</Latex>-Reliability
                                        </h4>
                                        <p className="text-sm text-slate-600">
                                            Proposed by Daskin et al. Traditional Minimax Regret focuses too much on extreme "Black Swan" scenarios.
                                            <Latex>\alpha</Latex>-Reliability considers only the set of scenarios whose cumulative probability reaches <Latex>\alpha</Latex> (e.g., 95%), ignoring the remaining 5% outliers. This avoids infinite costs for rare disasters, a more pragmatic definition of robustness.
                                        </p>
                                    </div>

                                </div>
                            </section>

                            {/* Implications for Shenzhen 120 */}
                            <section>
                                <h2 className="text-2xl font-bold text-slate-900 mb-6 flex items-center gap-2">
                                    <i data-lucide="zap" className="w-5 h-5 text-amber-500"></i>
                                    Implications for Shenzhen 120 Project
                                </h2>
                                <div className="space-y-4">
                                    <div className="flex gap-4 p-4 bg-white rounded-xl border border-slate-100 shadow-sm">
                                        <div className="shrink-0 w-10 h-10 rounded-full bg-amber-100 text-amber-600 flex items-center justify-center font-bold">1</div>
                                        <div>
                                            <h4 className="font-bold text-slate-900">Routine vs. Emergency Mode</h4>
                                            <p className="text-slate-600 text-sm mt-1">
                                                For known patterns like morning/evening peaks, use <strong>Stochastic Models</strong> to minimize average response time. For typhoons/mass accidents with unknown probabilities, use <strong>Robust Models</strong> to minimize maximum regret.
                                            </p>
                                        </div>
                                    </div>
                                    <div className="flex gap-4 p-4 bg-white rounded-xl border border-slate-100 shadow-sm">
                                        <div className="shrink-0 w-10 h-10 rounded-full bg-amber-100 text-amber-600 flex items-center justify-center font-bold">2</div>
                                        <div>
                                            <h4 className="font-bold text-slate-900">The p-Robustness Constraint</h4>
                                            <p className="text-slate-600 text-sm mt-1">
                                                Recommend adding a p-robustness constraint to your optimization model. This guarantees efficient operation on average while ensuring system performance doesn't drop by more than <Latex>p\%</Latex> (e.g., 20%) compared to the theoretical optimum during worst-case disasters.
                                            </p>
                                        </div>
                                    </div>
                                    <div className="flex gap-4 p-4 bg-white rounded-xl border border-slate-100 shadow-sm">
                                        <div className="shrink-0 w-10 h-10 rounded-full bg-amber-100 text-amber-600 flex items-center justify-center font-bold">3</div>
                                        <div>
                                            <h4 className="font-bold text-slate-900">Scenario Planning</h4>
                                            <p className="text-slate-600 text-sm mt-1">
                                                Do not try to predict a single "accurate demand". The paper suggests generating discrete scenario sets (e.g., "Workday", "Holiday", "Typhoon") and optimizing over these. This is computationally more feasible and robust than using single averages.
                                            </p>
                                        </div>
                                    </div>
                                </div>
                            </section>
                        </main>

                        {/* Sidebar */}
                        <aside className="space-y-8 h-fit sticky top-8">
                            <div className="bg-white p-6 rounded-xl border border-slate-200 shadow-sm">
                                <h3 className="font-bold text-xs uppercase text-slate-400 mb-4 tracking-wider">Paper Metadata</h3>
                                <ul className="space-y-4 text-sm">
                                    <li className="flex flex-col">
                                        <span className="text-slate-500 text-xs">Keywords</span>
                                        <span className="font-medium text-slate-800">Stochastic Location, Robust Optimization, Minimax Regret, p-Robustness</span>
                                    </li>
                                    <li className="flex flex-col">
                                        <span className="text-slate-500 text-xs">Problem Class</span>
                                        <span className="font-medium text-slate-800">Strategic Network Design, P-Median, UFLP</span>
                                    </li>
                                    <li className="flex flex-col">
                                        <span className="text-slate-500 text-xs">Review Scope</span>
                                        <span className="font-medium text-slate-800">1960s - 2005 (Comprehensive Survey)</span>
                                    </li>
                                </ul>
                            </div>

                            <div className="bg-slate-900 text-white p-6 rounded-xl shadow-lg">
                                <h3 className="font-bold text-lg mb-4 border-b border-slate-700 pb-2">Why Read This?</h3>
                                <p className="text-sm text-slate-300 leading-relaxed mb-4">
                                    This paper is the definitive guide to navigating the alphabet soup of uncertainty models. It helps you choose between optimizing for the <strong>average case</strong> (saving money) vs the <strong>worst case</strong> (saving lives/reputation).
                                </p>
                                <div className="text-xs font-mono bg-slate-800 p-2 rounded text-center text-purple-300">
                                    Essential for 120 Project Strategy
                                </div>
                            </div>
                        </aside>
                    </div>

                    {/* Footer */}
                    <footer className="mt-20 border-t border-slate-200 pt-8 text-center text-slate-400 text-sm">
                        <p>Generated for the Shenzhen Ambulance Optimization Project</p>
                        <p className="mt-2">Based on Snyder, L. V. (2006). Facility location under uncertainty: a review.</p>
                    </footer>
                </div>
            );
        };

        const root = ReactDOM.createRoot(document.getElementById('root'));
        root.render(<App />);
    </script>
</body>
</html>